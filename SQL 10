CREATE TABLE MEAL (
  MEAL_ID INT NOT NULL AUTO_INCREMENT,
  NAME VARCHAR(255),
  PRICE DOUBLE,
  CALORIES INT,
  PRIMARY KEY (MEAL_ID)
);


CREATE TABLE INGREDIENT (
  INGREDIENT_ID INT NOT NULL AUTO_INCREMENT,
  NAME VARCHAR(255),
  CONTAINS_LACTOSE BOOLEAN,
  VEGETARIAN BOOLEAN,
  VEGAN BOOLEAN,
  GLUTEN_FREE BOOLEAN,
  PRIMARY KEY (INGREDIENT_ID)
);


CREATE TABLE MEAL_INGREDIENT (
  MEAL_ID INT,
  INGREDIENT_ID INT
);


INSERT INTO INGREDIENT (NAME, CONTAINS_LACTOSE, VEGETARIAN, VEGAN, GLUTEN_FREE)
VALUES ('Pasta', false, true, false, false);

INSERT INTO INGREDIENT (NAME, CONTAINS_LACTOSE, VEGETARIAN, VEGAN, GLUTEN_FREE)
VALUES ('Bread', false, true, true, false);

INSERT INTO INGREDIENT (NAME, CONTAINS_LACTOSE, VEGETARIAN, VEGAN, GLUTEN_FREE)
VALUES ('Chicken Patty', false, false, false, true);

INSERT INTO INGREDIENT (NAME, CONTAINS_LACTOSE, VEGETARIAN, VEGAN, GLUTEN_FREE)
VALUES ('Lettuce', false, true, true, true);

INSERT INTO INGREDIENT (NAME, CONTAINS_LACTOSE, VEGETARIAN, VEGAN, GLUTEN_FREE)
VALUES ('Yoghurt', true, true, false, true);

INSERT INTO INGREDIENT (NAME, CONTAINS_LACTOSE, VEGETARIAN, VEGAN, GLUTEN_FREE)
VALUES ('Garlic', false, true, true, true);

INSERT INTO INGREDIENT (NAME, CONTAINS_LACTOSE, VEGETARIAN, VEGAN, GLUTEN_FREE)
VALUES ('Basil', false, true, true, true);

INSERT INTO INGREDIENT (NAME, CONTAINS_LACTOSE, VEGETARIAN, VEGAN, GLUTEN_FREE)
VALUES ('Rice', false, true, true, true);

INSERT INTO INGREDIENT (NAME, CONTAINS_LACTOSE, VEGETARIAN, VEGAN, GLUTEN_FREE)
VALUES ('Tomato sauce', false, true, true, true);


INSERT INTO MEAL(NAME, PRICE, CALORIES)
VALUES ('Spaghetti Bolognese', 12.99, 600),
('Grilled Chicken Sandwich', 8.99, 400),
('Pesto Pasta', 10.99, 550),
('Sushi Platter', 15.99, 700),
('Steak and Mash', 19.99, 800);


CREATE TABLE MEAL_ORDER (
  TIME_MEAL_ORDERED TIMESTAMP DEFAULT NOW(),
  MEAL_NAME VARCHAR(255)
);


    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (NOW(), 'Spaghetti Bolognese');

    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (DATE_ADD(NOW(), INTERVAL 1 HOUR), 'Grilled Chicken Sandwich');

    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (DATE_ADD(NOW(), INTERVAL 2 HOUR), 'Pesto Pasta');

    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (DATE_ADD(NOW(), INTERVAL 3 HOUR), 'Pesto Pasta');

    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (DATE_ADD(NOW(), INTERVAL 4 HOUR), 'Grilled Chicken Sandwich');

    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (DATE_ADD(NOW(), INTERVAL 5 HOUR), 'Pesto Pasta');

    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (DATE_ADD(NOW(), INTERVAL 6 HOUR), 'Spaghetti Bolognese');

    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (DATE_ADD(NOW(), INTERVAL 7 HOUR), 'Pesta Pasta');

    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (DATE_ADD(NOW(), INTERVAL 8 HOUR), 'Pesto Pasta');

    INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
    VALUES (DATE_ADD(NOW(), INTERVAL 9 HOUR), 'Spaghetti Bolognese');


CREATE VIEW MEAL_ORDER_WITH_DETAILS AS
    SELECT MO.*, M.PRICE, M.CALORIES FROM MEAL_ORDER MO, MEAL M
    WHERE MO.MEAL_NAME = M.NAME;


INSERT INTO MEAL_ORDER (TIME_MEAL_ORDERED, MEAL_NAME)
VALUES (NOW(), 'Spaghetti Bolognese'),
(DATE_ADD(NOW(), INTERVAL 1 HOUR), 'Grilled Chicken Sandwich'),
(DATE_ADD(NOW(), INTERVAL 2 HOUR), 'Pesto Pasta'), (DATE_ADD(NOW(), INTERVAL 3 HOUR), 'Steak and Mash'), (DATE_ADD(NOW(), INTERVAL 4 HOUR), 'Spaghetti Bolognese'),
(DATE_ADD(NOW(), INTERVAL 5 HOUR), 'Sushi Platter'), (DATE_ADD(NOW(), INTERVAL 6 HOUR), 'Pesto Pasta'), (DATE_ADD(NOW(), INTERVAL 7 HOUR), 'Spaghetti Bolognese'), (DATE_ADD(NOW(), INTERVAL 8 HOUR), 'Steak and Mash'), (DATE_ADD(NOW(), INTERVAL 9 HOUR), 'Grilled Chicken Sandwich'),
(DATE_ADD(NOW(), INTERVAL 10 HOUR), 'Spaghetti Bolognese'), (DATE_ADD(NOW(), INTERVAL 11 HOUR), 'Pesto Pasta'), (DATE_ADD(NOW(), INTERVAL 12 HOUR), 'Sushi Platter'), (DATE_ADD(NOW(), INTERVAL 13 HOUR), 'Spaghetti Bolognese'), (DATE_ADD(NOW(), INTERVAL 14 HOUR), 'Steak and Mash'),
(DATE_ADD(NOW(), INTERVAL 15 HOUR), 'Grilled Chicken Sandwich'), (DATE_ADD(NOW(), INTERVAL 16 HOUR), 'Sushi Platter'), (DATE_ADD(NOW(), INTERVAL 17 HOUR), 'Steak and Mash'), (DATE_ADD(NOW(), INTERVAL 18 HOUR), 'Spaghetti Bolognese'), (DATE_ADD(NOW(), INTERVAL 19 HOUR), 'Grilled Chicken Sandwich'),
(DATE_ADD(NOW(), INTERVAL 20 HOUR), 'Pesto Pasta'), (DATE_ADD(NOW(), INTERVAL 21 HOUR), 'Sushi Platter'), (DATE_ADD(NOW(), INTERVAL 22 HOUR), 'Steak and Mash');





CREATE TABLE MEAL_INGREDIENT (
  MEAL_ID INT,
  INGREDIENT_ID INT
);


INSERT INTO MEAL_INGREDIENT (MEAL_ID, INGREDIENT_ID)
VALUES ( 1, 1),
       ( 1, 7),
       ( 1, 9);

INSERT INTO MEAL_INGREDIENT (MEAL_ID, INGREDIENT_ID)
VALUES ( 2, 3);

INSERT INTO MEAL_INGREDIENT (MEAL_ID, INGREDIENT_ID)
VALUES ( 3, 1),
       ( 3, 7);

INSERT INTO MEAL_INGREDIENT (MEAL_ID, INGREDIENT_ID)
VALUES ( 4, 8),
       ( 4, 4);

INSERT INTO MEAL_INGREDIENT (MEAL_ID, INGREDIENT_ID)
VALUES ( 5, 6);


SELECT MEAL.NAME FROM MEAL
INNER JOIN MEAL_INGREDIENT ON MEAL_INGREDIENT.MEAL_ID = MEAL.MEAL_ID
INNER JOIN INGREDIENT ON INGREDIENT.INGREDIENT_ID = MEAL_INGREDIENT.INGREDIENT_ID
WHERE INGREDIENT.NAME = 'Garlic';


SELECT COUNT(DISTINCT MEAL.NAME) FROM MEAL
INNER JOIN MEAL_INGREDIENT ON MEAL_INGREDIENT.MEAL_ID = MEAL.MEAL_ID
INNER JOIN INGREDIENT ON MEAL_INGREDIENT.INGREDIENT_ID = INGREDIENT.INGREDIENT_ID 
WHERE INGREDIENT.VEGETARIAN = true;


SELECT DISTINCT MEAL.NAME FROM MEAL
INNER JOIN MEAL_INGREDIENT ON MEAL_INGREDIENT.MEAL_ID = MEAL.MEAL_ID
INNER JOIN INGREDIENT ON INGREDIENT.INGREDIENT_ID = MEAL_INGREDIENT.INGREDIENT_ID
WHERE INGREDIENT.GLUTEN_FREE = true AND INGREDIENT.VEGAN = true;


SELECT AVG(NUMBER_OF_INGREDIENT) FROM (
SELECT COUNT(MEAL_INGREDIENT.INGREDIENT_ID) AS NUMBER_OF_INGREDIENT FROM MEAL_INGREDIENT
GROUP BY MEAL_ID) AS INGRIDIENT_COUNT_TABLE;


SELECT MEAL.NAME, COUNT(MEAL_INGREDIENT.INGREDIENT_ID) AS NUMBER_OF_INGREDIENT FROM MEAL_INGREDIENT
INNER JOIN MEAL ON MEAL.MEAL_ID = MEAL_INGREDIENT.MEAL_ID
GROUP BY MEAL.NAME
HAVING NUMBER_OF_INGREDIENT >= 3;


Question 6 = SELECT * FROM CUSTOMER 
              INNER JOIN ORDERS ON ORDERS.CUSTOMER_ID = CUSTOMERS.CUSTOMER_ID
              WHERE ORDER_ID = 1;


Question 7 = SELECT * FROM PRODUCT 
              INNER JOIN INVENTORY ON INVENTORY.PRODUCT_ID = PRODUCT.PRODUCT_ID
              WHERE STORE_ID = 1;
